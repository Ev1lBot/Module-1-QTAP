<h2>–ú–µ–Ω–µ–¥–∂–µ—Ä –∑–∞–¥–∞—á</h2>

<!-- –î–æ–¥–∞—Ç–∏ —Å–ø–∏—Å–æ–∫ -->
<form action="/add-list" method="POST">
  <input type="text" name="title" placeholder="–ù–∞–∑–≤–∞ —Å–ø–∏—Å–∫—É" required>
  <button type="submit">–î–æ–¥–∞—Ç–∏ —Å–ø–∏—Å–æ–∫</button>
</form>

<div class="lists">
  <% lists.forEach(list => { %>
    <div class="list">
      <h3><%= list.title %></h3>
      <form action="/delete-list/<%= list.id %>" method="POST">
        <button type="submit">üóë –í–∏–¥–∞–ª–∏—Ç–∏ —Å–ø–∏—Å–æ–∫</button>
      </form>

      <!-- –§–æ—Ä–º–∞ –¥–ª—è –¥–æ–¥–∞–≤–∞–Ω–Ω—è –∑–∞–¥–∞—á -->
      <form action="/add-task" method="POST">
        <input type="hidden" name="listId" value="<%= list.id %>">
        <input type="text" name="title" placeholder="–ù–æ–≤–∞ –∑–∞–¥–∞—á–∞" required>
        <select name="status">
          <option value="todo">To Do</option>
          <option value="in-progress">In Progress</option>
        </select>
        <button type="submit">–î–æ–¥–∞—Ç–∏</button>
      </form>

      <!-- –í—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –∑–∞–¥–∞—á —É —Å–ø–∏—Å–∫—É -->
      <div class="columns">
        <div class="column">
          <h4>To Do</h4>
          <% list.tasks.filter(task => task.status === 'todo').forEach(task => { %>
            <div class="task">
              <p><%= task.title %></p>
              <div>
                  <form action="/delete-task/<%= list.id %>/<%= task.id %>" method="POST">
                    <button type="submit">Delete</button>
                  </form>
                  <form action="/change-status/<%= list.id %>/<%= task.id %>/in-progress" method="POST">
                    <button type="submit">In progress</button>
                  </form>
              </div>
            </div>
          <% }) %>
        </div>
        <div class="column">
          <h4>In Progress</h4>
          <% list.tasks.filter(task => task.status === 'in-progress').forEach(task => { %>
            <div class="task"><p><%= task.title %></p>
                <div>
                    <form action="/delete-task/<%= list.id %>/<%= task.id %>" method="POST">
                        <button type="submit">Delete</button>
                    </form>
                    <form action="/change-status/<%= list.id %>/<%= task.id %>/done" method="POST">
                        <button type="submit">Done</button>
                    </form>
                </div>
            </div>
          <% }) %>
        </div>
        <div class="column">
          <h4>Done</h4>
          <% list.tasks.filter(task => task.status === 'done').forEach(task => { %>
            <div class="task">
                <p><%= task.title %></p>
                <form action="/delete-task/<%= list.id %>/<%= task.id %>" method="POST">
                    <button type="submit">Delete</button>
                </form>
            </div>
          <% }) %>
        </div>
      </div>
    </div>
  <% }) %>
</div>